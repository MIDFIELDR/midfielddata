---
output: github_document 
csl: inst/information-science-and-technology.csl 
bibliography: inst/REFERENCES.bib 
always_allow_html: true 
link-citations: yes 
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r}
#| include: false
knitr::opts_chunk$set(
  echo = TRUE,
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-"
)

# data.table printout
options(
  datatable.print.nrows = 6,
  datatable.print.topn = 3,
  datatable.print.class = FALSE
)

# inline numbers
knitr::knit_hooks$set(inline = function(x) {
  if (!is.numeric(x)) {
    x
  } else if (x >= 10000) {
    prettyNum(round(x, 2), big.mark = ",")
  } else {
    prettyNum(round(x, 2))
  }
})
```

<br>`midfielddata` is an R data package that supplies anonymized student-level records for 98,000 undergraduates from the MIDFIELD database. Provides practice data for the tools and methods of `midfieldr`. 

![](https://github.com/MIDFIELDR/midfielddata/blob/main/docs/logo.png?raw=true)




## Introduction

Data at the "student-level" refers to information collected by undergraduate institutions on individual students, including:   

- *course* information, e.g., course name & number, credit hours, and student grades 
- *term* information, e.g., program, academic standing, and grade point average 
- *student* demographic information, e.g., age, sex, and race/ethnicity
- *degree* information, e.g., institution, program, term, and baccalaureate degree

`midfielddata` provides anonymized student-level records for 98,000 undergraduates at three US institutions from 1988 through 2018, collected in four data tables keyed by student ID. 

```{r}
#| echo: false
load("R/sysdata.rda")
practice_data_summary |>
  kableExtra::kbl(align = "llrrrr", caption = "Table 1. Practice datasets in `midfielddata`.") |>
  kableExtra::kable_paper(lightable_options = "basic", full_width = FALSE) |>
  kableExtra::row_spec(0, background = "#c7eae5") |>
  kableExtra::column_spec(1, monospace = TRUE) |>
  kableExtra::column_spec(1:6, color = "black", background = "white")
```

The data in `midfielddata` are a proportionate stratified sample of the [MIDFIELD](#more-information) database, but are *not suitable for drawing inferences* about program attributes or student experiences---`midfielddata` are for *practice*, not research. 

*Notes on syntax.* &nbsp; We use `data.table` for data manipulation. Some users may prefer base R or `dplyr`. Each system has its strengths---users are welcome to translate our examples to their preferred syntax.  

```{r}
format(Sys.Date(), "%Y-%m-%d") # Today's date
packageVersion("midfielddata") # Student-level records practice data 
packageVersion("data.table")   # For data manipulation
```




## Usage

In this example, we display the student-level records for a single student across all four datasets. 

```{r}
library(midfielddata)
library(data.table)
```

Data tables can be loaded individually or collectively as needed.  

```{r}
# Load one table as needed
data(student)

# Or load multiple tables
data(course, term, degree)
```

Selecting a specific student ID.  

```{r}
# One student ID
id_we_want <- "MCID3112192438"
```





### `student` 

Run `?student` to view its help page and data dictionary. Contains one observation per student. Our example case yields, as expected, one observation. 

```{r}
# All observations for this ID
student[mcid == id_we_want]
```







### `course`

Run `?course` to view its help page and data dictionary. Contains one observation per student per course. Most students enroll in multiple courses, so we expect a specific ID to yield a block of observations. 

Our example case yields 47 course observations. 

```{r}
# All observations for this ID
course[mcid == id_we_want]
```







### `term`

Run `?term` to view its help page and data dictionary. Contains one observation per student per term. Again, most students enroll in multiple terms, so we expect a specific ID to yield a block of observations. 

Our example case yields 10 term observations. 

```{r}
# All observations for this ID
term[mcid == id_we_want]
```









### `degree`

Run `?degree` to view its help page and data dictionary. Contains one observation per student per degree. Most students earn one baccalaureate degree, but some earn more than one. 

Our example case yields two degree observations, both earned in Spring of academic year (AY) 2009--10 (encoded `20093`). 

```{r}
# All observations for this ID
degree[mcid == id_we_want]
```

Some students earn additional degrees after their first degree. The student `below`, for example, earned their first degree in Fall AY 1996--97 (encoded  `19961`) and their second in Summer AY 1999--2000 (encoded `19994`). In many analyses, only the first baccalaureate degree would be used. 

```{r}
# All observations for a new ID
degree[mcid == "MCID3111315508"]
```

```{r}
#| include: false

# Find duplicate IDs in degree
# DT <- copy(degree)
# idx <- which(duplicated(DT[, .(mcid)]))
# dup_ID <- DT[idx, .(mcid)]
# dup_degree <- dup_ID[degree, on = "mcid", nomatch = NULL]
# dup_degree
```




## Installation

Install with: 

```{r}
#| eval: false
install.packages("midfielddata",
  repos = "https://MIDFIELDR.github.io/drat/",
  type = "source"
)
``` 

The installed size of `midfielddata` is about 24 Mb, so installation will take longer than that of a conventional CRAN package. Also because of its size, the package is not hosted on CRAN (with its 5 MB size limit)---instead, we host it on the MIDFIELDR `drat` repository as indicated above. 

Link to installation instructions for `midfieldr` below.




## More information

[`midfieldr`](https://midfieldr.github.io/midfieldr/)

: A companion R package that provides tools and methods for studying undergraduate student-level records from the MIDFIELD database. 

[MIDFIELD](https://midfield.online/)

: A database of student-level records for approximately 1.7M undergraduates at nineteen US institutions from 1987 through 2018, of which `midfielddata`  provides a sample. The full research database is currently accessible to MIDFIELD partner institutions only. 

[MIDFIELD Institute](https://midfieldr.github.io/2022-midfield-institute/)

: Materials from the 2022 workshop, including an introduction to R for beginners, chart basics with `ggplot2` and data basics with `data.table`. 






## Acknowledgments

This work is supported by a grant from the US National Science Foundation (EEC 1545667).

```{r}
#| echo: false

# to change the CSS file
# per https://github.com/rstudio/rmarkdown/issues/732
knitr::opts_chunk$set(echo = FALSE)
```
